<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: /Library/WebServer/Documents/gustavo/maplink-dev/componente/componente.js</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="keyword" content="" />
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:url" content=""/>
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"Demo","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"","description":"","keyword":""}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Demo</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="RouterInformer">
            <span class="title">
                <a href="RouterInformer.html">RouterInformer</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="RouterInformer#endOpcoes"><a href="RouterInformer.html#endOpcoes">endOpcoes</a></li>
            
                <li data-name="RouterInformer#listaEnderecos"><a href="RouterInformer.html#listaEnderecos">listaEnderecos</a></li>
            
                <li data-name="RouterInformer#rotaDetalhes"><a href="RouterInformer.html#rotaDetalhes">rotaDetalhes</a></li>
            
                <li data-name="RouterInformer#rotaOpcoes"><a href="RouterInformer.html#rotaOpcoes">rotaOpcoes</a></li>
            
                <li data-name="RouterInformer#veiculo"><a href="RouterInformer.html#veiculo">veiculo</a></li>
            
                <li data-name="RouterInformer#wsEndereco"><a href="RouterInformer.html#wsEndereco">wsEndereco</a></li>
            
                <li data-name="RouterInformer#wsRota"><a href="RouterInformer.html#wsRota">wsRota</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="RouterInformer#adicionarEndereco"><a href="RouterInformer.html#adicionarEndereco">adicionarEndereco</a></li>
            
                <li data-name="RouterInformer#configurarEnderecoOpcoes"><a href="RouterInformer.html#configurarEnderecoOpcoes">configurarEnderecoOpcoes</a></li>
            
                <li data-name="RouterInformer#configurarRotaDetalhes"><a href="RouterInformer.html#configurarRotaDetalhes">configurarRotaDetalhes</a></li>
            
                <li data-name="RouterInformer#configurarRotaOpcoes"><a href="RouterInformer.html#configurarRotaOpcoes">configurarRotaOpcoes</a></li>
            
                <li data-name="RouterInformer#configurarVeiculo"><a href="RouterInformer.html#configurarVeiculo">configurarVeiculo</a></li>
            
                <li data-name="RouterInformer#formatarEndereco"><a href="RouterInformer.html#formatarEndereco">formatarEndereco</a></li>
            
                <li data-name="RouterInformer#getEnderecoOpcoes"><a href="RouterInformer.html#getEnderecoOpcoes">getEnderecoOpcoes</a></li>
            
                <li data-name="RouterInformer#getEnderecos"><a href="RouterInformer.html#getEnderecos">getEnderecos</a></li>
            
                <li data-name="RouterInformer#getRotaDetalhes"><a href="RouterInformer.html#getRotaDetalhes">getRotaDetalhes</a></li>
            
                <li data-name="RouterInformer#getRotaOpcoes"><a href="RouterInformer.html#getRotaOpcoes">getRotaOpcoes</a></li>
            
                <li data-name="RouterInformer#getVeiculo"><a href="RouterInformer.html#getVeiculo">getVeiculo</a></li>
            
                <li data-name="RouterInformer#humanizarEndereco"><a href="RouterInformer.html#humanizarEndereco">humanizarEndereco</a></li>
            
                <li data-name="RouterInformer#removerEndereco"><a href="RouterInformer.html#removerEndereco">removerEndereco</a></li>
            
                <li data-name="RouterInformer#setEnderecoOpcoes"><a href="RouterInformer.html#setEnderecoOpcoes">setEnderecoOpcoes</a></li>
            
                <li data-name="RouterInformer#setRotaDetalhes"><a href="RouterInformer.html#setRotaDetalhes">setRotaDetalhes</a></li>
            
                <li data-name="RouterInformer#setRotaOpcoes"><a href="RouterInformer.html#setRotaOpcoes">setRotaOpcoes</a></li>
            
                <li data-name="RouterInformer#setVeiculo"><a href="RouterInformer.html#setVeiculo">setVeiculo</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="componente.js.html">Source: /Library/WebServer/Documents/gustavo/maplink-dev/componente/componente.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source"><code>
    /**
    * Classe que utiliza os serviços do MapLink JS API.
    * @class
    */
    function RouterInformer () {
        /**
        * Serviço fornecido pelo MapLink JS API. 
        * É utilizada para consumir o serviço SOAP “AddressFinder”
        * @property {MWsAddressFinder}
        */
        this.wsEndereco     = new MWsAddressFinder();

        /**
        * Serviço fornecido pelo MapLink JS API. 
        * É utilizada para consumir o serviço SOAP “Route”
        * @property {MWsRoute}
        */
        this.wsRota         = new MWsRoute();

        /**
        * Objejo fornecido pelo MapLink JS API, para utilizar no serviço de endereço (MWsAddressFinder). 
        * @property {MAddressOptions}
        */
        this.endOpcoes      = new MAddressOptions();

        /**
        * Objejo fornecido pelo MapLink JS API, para utilizar no serviço de rota (MWsRoute). 
        * @property {MVehicle}
        */
        this.veiculo        = new MVehicle();

        /**
        * Objejo fornecido pelo MapLink JS API, para utilizar no serviço de rota (MWsRoute). 
        * @property {MRouteDetails}
        */
        this.rotaDetalhes   = new MRouteDetails();

        /**
        * Objejo fornecido pelo MapLink JS API, para utilizar no serviço de rota (MWsRoute). 
        * @property {MRouteOptions}
        */
        this.rotaOpcoes     = new MRouteOptions();

        /**
        * Lista dos endereços armazenados para uso nos métodos do RouterInformer
        * @property {Array}
        */
        this.listaEnderecos = [];

        //configura padroes
        this.configurarVeiculo();
        this.configurarRotaDetalhes();
        this.configurarRotaOpcoes();
        this.configurarEnderecoOpcoes(true);
    }

    /*===== Getters / Setters =====*/

    /**
    * Método para trocar o veículo utilizado
    * @param {MVehicle} [pVeiculo]
    */
    RouterInformer.prototype.setVeiculo = function(pVeiculo) { this.veiculo = pVeiculo; };

    /**
    * Método que retorna o veículo utilizado
    * @return {MVehicle} veículo utilizado na rota
    */
    RouterInformer.prototype.getVeiculo = function() { return this.veiculo; };

    /**
    * Método para trocar o objeto de detalhes de rota
    * @param {MRouteDetails} [pRotaDetalhes]
    */
    RouterInformer.prototype.setRotaDetalhes = function(pRotaDetalhes) { this.rotaDetalhes = pRotaDetalhes; };

    /**
    * Método que retorna os detalhes de rota
    * @return {MRouteDetails} objeto de detalhes de rota
    */
    RouterInformer.prototype.getRotaDetalhes = function() { return this.rotaDetalhes; };

    /**
    * Método para trocar o objeto de opções de rota
    * @param {MRouteOptions} [pRotaOpcoes]
    */
    RouterInformer.prototype.setRotaOpcoes = function(pRotaOpcoes) { this.rotaOpcoes = pRotaOpcoes; };

    /**
    * Método que retorna as opções de rota
    * @return {MRouteOptions} objeto de opções de rota
    */
    RouterInformer.prototype.getRotaOpcoes = function() { return this.rotaOpcoes; };

    /**
    * Método para trocar o objeto de opções de endereço
    * @param {MAddressOptions} [pEnderecoOpcoes]
    */
    RouterInformer.prototype.setEnderecoOpcoes = function(pEnderecoOpcoes) { this.endOpcoes = pEnderecoOpcoes; };

    /**
    * Método que retorna as opções de endereço
    * @return {MAddressOptions} objeto de opções de endereço
    */
    RouterInformer.prototype.getEnderecoOpcoes = function() { return this.endOpcoes; };

    /**
    * Método que retorna a lista de endereços
    * @return {Array} lista de endereços
    */
    RouterInformer.prototype.getEnderecos = function() { return this.listaEnderecos; };

    /**
    * Função para configurar Veiculo
    * @param {number} [capacidadeTanque=20] Capacidade do tanque do veículo
    * @param {number} [consumoMedio=9] Consumo médio do veículo
    * @param {number} [precoCombustivel=3] Preço do litro de combustível
    * @param {number} [velocidadeMedia=60] Velocidade do veículo
    * @param {number} [categoriaPedagio=2] Categoria de pedágio usada no cálculo de rota
    */
    RouterInformer.prototype.configurarVeiculo = function(capacidadeTanque, consumoMedio, precoCombustivel, velocidadeMedia, categoriaPedagio) {
        this.veiculo.tankCapacity       = capacidadeTanque  || 20;
        this.veiculo.averageConsumption = consumoMedio      || 9;
        this.veiculo.fuelPrice          = precoCombustivel  || 3;
        this.veiculo.averageSpeed       = velocidadeMedia   || 60;
        this.veiculo.tollFeeCat         = categoriaPedagio  || 2;
    };

    /** Função para configurar detalhes da Rota 
    * @param {boolean} [otimizarRota=true] Otimizar a rota
    * @param {number} [tipoRota=0] Tipo de rota utilizada
    * @param {number} [tipoDescricao=0] Tipo de descrição
    */
    RouterInformer.prototype.configurarRotaDetalhes = function(otimizarRota, tipoRota, tipoDescricao) {
        this.rotaDetalhes.optimizeRoute   = !!otimizarRota;
        this.rotaDetalhes.descriptionType = tipoDescricao   || 0;
        this.rotaDetalhes.routeType       = tipoRota        || 0;
    };

    /** Função para configurar Opções da Rota
    * @param {string} [lingua=portugues] lingua utilizada no retorno
    * @param {MRouteOptions} [pRotaDetalhes=this.rotaDetalhes] Tipo de rota utilizada
    * @param {nMVehicle} [pVeiculo=this.veiculo] Tipo de descrição
    */
    RouterInformer.prototype.configurarRotaOpcoes = function(lingua, pRotaDetalhes, pVeiculo) {
        this.rotaOpcoes.language     = lingua || "portugues";
        this.rotaOpcoes.routeDetails = pRotaDetalhes || this.rotaDetalhes;
        this.rotaOpcoes.vehicle      = pVeiculo || this.veiculo;
    };

    /** Função para configurar Opções de Endereço
    * @param {boolean} [usarFonetica=true] Otimizar a rota
    * @param {number} [tipoBusca=2] Tipo de busca utilizada
    * @param {number} [tipoAcerto=1] Tipo de Match utilizado na busca
    */
    RouterInformer.prototype.configurarEnderecoOpcoes = function(usarFonetica, tipoBusca, tipoAcerto) {
        this.endOpcoes.matchType   = tipoAcerto || 1;
        this.endOpcoes.searchType  = tipoBusca || 2;
        this.endOpcoes.usePhonetic = !!usarFonetica;
    };

    /** Função Helper para transformar objeto MAddress em um formato legível e humano
    * @param {MAddress} objeto de endereço que será tratado
    * @return {string} string com endereço em formato legível e humano
    */
    RouterInformer.prototype.humanizarEndereco = function(endereco) {
        return endereco.street + ", " + endereco.houseNumber + " - " + endereco.city.name + ", " + endereco.city.state;
    };

    /** Função Helper para juntar parametros em um objeto MAddress
    * @param {string} [rua] Nome da rua ou avenida
    * @param {string|number} [numero] Número ou altura da rua
    * @param {string} [cidade] Nome da cidade
    * @param {string} [estado] Estado da União
    * @return {MAddress} objeto de endereço
    */
    RouterInformer.prototype.formatarEndereco = function(rua, numero, cidade, estado) {
        var endereco = new MAddress();
        endereco.street = rua;
        endereco.houseNumber = numero;

        var city = new MCity();
        city.name = cidade;
        city.state = estado.toUpperCase();

        endereco.city = city;
        return endereco;
    };

    /** Função para adicionar um endereco na lista que será usada nas infos de rota
    * @param {MAddress} [pEndereco] Objeto de endereço
    * @param {MPoint} [pCoordenadas] Objeto de endereço
    */
    RouterInformer.prototype.adicionarEndereco = function(pEndereco, pCoordenadas) {
        this.listaEnderecos.push( {addr: pEndereco, coords: pCoordenadas } );
    };

    /** Função para remover um endereco da lista que será usada nas infos de rota
    * @param {number} [indice] indice do objeto na lista
    */
    RouterInformer.prototype.removerEndereco = function(indice) {
        this.listaEnderecos.splice(indice,1);
    };

    /** Função que realiza busca das informações do endereco
    * @param {MAddress} [mEndereco] endereço que será buscado
    * @callback funcaoRetorno
    */
    RouterInformer.prototype.buscarEndereco = function(mEndereco, funcaoRetorno) {
        var ri = this;
        this.wsEndereco.findAddress(mEndereco, this.endOpcoes, function(resposta) {
            funcaoRetorno.apply(ri, [resposta]);
        });
    };

    /** Função que realiza busca nas informoções da rota
    * @callback funcaoRetorno
    */
    RouterInformer.prototype.buscarInfosRotas = function(funcaoRetorno) {
        var ri = this;
        var rss = [];

        for (var i = 0; i &lt; this.listaEnderecos.length; i++) {
            var rs = new MRouteStop();
            rs.description = this.humanizarEndereco( this.listaEnderecos[i].addr )
            rs.point = new MPoint( this.listaEnderecos[i].coords.x, this.listaEnderecos[i].coords.y );
            rss.push(rs)
        };

        this.wsRota.getRouteTotals(rss, this.rotaOpcoes, function(resposta) {
            funcaoRetorno.apply(ri, [resposta]);
        });
    };

    </code></pre>
        </article>
    </section>





        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a> on Thu Apr 10 2014 00:29:24 GMT-0300 (BRT)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>